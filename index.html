<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>heavenly.food</title>
  <link rel="icon" href="images/logo.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="images/logo.png" sizes="180x180">  <!-- Buat iOS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* =========================
       Heavenly Premium Style
       ========================= */
    /* === GLOBAL VARIABLES & RESET === */
    :root {
      --green: #2e8b4f;
      --green-2: #6fd595;
      --muted: #6b6b6b;
      --glass: rgba(255, 255, 255, 0.65);
      --bg: #fbfdfc;
      --card-shadow: 0 8px 30px rgba(18, 30, 41, 0.08);
      --radius: 14px;
    }
    * {
      box-sizing: border-box;
    }
    html,
    body {
      height: 100%;
      font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #fbfff9 0%, #ffffff 100%);
      color: #111;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.5;
      overflow-x: hidden;
      position: relative;
    }
    /* === LAYOUT UTILITIES === */
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .section {
      padding: 68px 0;
    }
    .section-alt {
      background: linear-gradient(180deg, #fff, #fbfff8);
    }
    .section-title {
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 22px;
      color: var(--green);
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .card {
      background: var(--glass);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(6px);
    }
    .image-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
    /* === LOADING SCREEN === */
    .loading {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
      z-index: 9999;
      backdrop-filter: blur(6px);
    }
    .loader {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
    }
    .logo-spin {
      width: 72px;
      height: 72px;
      animation: spin 1.6s linear infinite;
    }
    .logo-spin circle {
      fill: none;
      stroke: var(--green);
      stroke-width: 6;
      stroke-linecap: round;
      stroke-dasharray: 120;
      stroke-dashoffset: 40;
    }
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    /* === NAVIGATION === */
    .nav-wrap {
      position: sticky;
      top: 0;
      z-index: 900;
    }
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 0;
      gap: 12px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--green);
    }
    .brand-mark {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      box-shadow: var(--card-shadow);
    }
    .brand-text {
      font-family: "Playfair Display";
      font-weight: 700;
      font-size: 1.15rem;
    }
    .nav-links {
      display: flex;
      gap: 18px;
      list-style: none;
    }
    .nav-links a {
      color: #0f1720;
      text-decoration: none;
      font-weight: 600;
      opacity: 0.95;
      transition: all 0.25s ease;
    }
    .nav-links a:hover {
      color: var(--green);
      transform: translateY(-3px);
    }
    .nav-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    /* === BUTTONS === */
    .btn {
      padding: 10px 16px;
      border-radius: 999px;
      border: 0;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.22s ease;
    }
    .btn.ghost {
      background: transparent;
      border: 1px solid rgba(15, 23, 32, 0.06);
      text-decoration: none;
    }
    .btn.primary {
      background: linear-gradient(90deg, var(--green), var(--green-2));
      color: #fff;
      box-shadow: 0 8px 18px rgba(46, 139, 79, 0.18);
      text-decoration: none;
    }
    .badge {
      background: #fff;
      padding: 2px 8px;
      border-radius: 999px;
      margin-left: 8px;
      font-weight: 700;
    }
    /* === FIXED NAVBAR === */
    .nav-fixed {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.82);
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      z-index: 2000;
    }
    body { padding-top: 90px; }
    .brand-mark {
      height: 50px;
      width: auto;
      object-fit: contain;
      background: none;
      display: block;
    }
    /* === HERO SECTION === */
    .hero {
      position: relative;
      padding: 50px 0 40px;
      overflow: visible;
    }
    .hero-bg {
      position: absolute;
      inset: 0;
      top: 8px;
      background: linear-gradient(160deg, rgba(46, 139, 79, 0.07), rgba(111, 213, 149, 0.04));
      pointer-events: none;
      transform: translateZ(0);
    }
    .hero-inner {
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 36px;
      align-items: center;
    }
    .title {
      font-family: "Poppins", sans-serif;
      font-weight: 800;
      font-size: 68px;
      line-height: 1.2;
      margin-bottom: 24px;
    }
    .subtitle {
      color: var(--muted);
      margin-bottom: 18px;
    }
    .hero-cta {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    /* Hero Card */
    .hero-card {
      background: linear-gradient(180deg, var(--glass), rgba(255, 255, 255, 0.5));
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
      padding: 0;
      cursor: pointer;
      transition: transform 0.35s cubic-bezier(0.2, 0.9, 0.3, 1), box-shadow 0.35s;
    }
    .hero-card img {
      width: 100%;
      height: 320px;
      object-fit: cover;
      display: block;
    }
    .hero-card figcaption {
      padding: 14px 16px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.4), transparent);
    }
    .hero-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 18px 48px rgba(18, 30, 41, 0.12);
    }
    /* === MENU GRID === */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    .menu-item {
      border-radius: 14px;
      overflow: hidden;
      background: #fff;
      border: 1px solid rgba(6, 15, 12, 0.03);
      transition: transform 0.32s cubic-bezier(0.2, 0.9, 0.3, 1), box-shadow 0.32s;
    }
    .menu-item.special {
      grid-column: span 3;
      min-height: 280px;
    }
    .menu-item .thumb {
      height: 180px;
      overflow: hidden;
    }
    .menu-item.special .thumb {
      height: 220px;
    }
    .menu-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.5s;
    }
    .menu-item .meta {
      padding: 14px;
    }
    .menu-item h3 {
      margin: 0 0 6px;
      color: var(--green);
    }
    .menu-item p {
      margin: 0 0 10px;
      color: var(--muted);
    }
    .menu-item .meta .price {
      font-weight: 700;
      color: #163316;
    }
    .menu-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 50px rgba(6, 15, 12, 0.08);
    }
    .menu-item:hover img {
      transform: scale(1.06);
    }
   /* === GALLERY GRID === */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); /* Auto kolom, min 150px untuk variasi */
      grid-auto-rows: 10px; /* Masonry: Baris kecil, span nanti di JS */
      gap: 8px 12px; /* Gap asimetris: vertikal 8px, horizontal 12px */
      max-width: 700px; /* Lebih lebar biar variasi terlihat */
      margin: 0 auto;
      padding: 20px 0; /* Spacing extra untuk estetik */
    }
    .gallery-grid > div { /* Wrapper untuk setiap gambar */
      overflow: hidden;
      border-radius: 12px;
      transition: all 0.4s cubic-bezier(0.2, 0.9, 0.3, 1); /* Smooth animasi */
      box-shadow: 0 4px 20px rgba(46, 139, 79, 0.1); /* Shadow hijau lembut */
      position: relative; /* Untuk overlap z-index */
      margin-bottom: -4px; /* Overlap ringan vertikal untuk kolase organik */
    }
    .gallery-grid > div::before { /* Gradient border estetik */
      content: '';
      position: absolute;
      inset: 0;
      padding: 2px;
      background: linear-gradient(45deg, var(--green), var(--green-2));
      border-radius: 12px;
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .gallery-grid > div:hover::before {
      opacity: 1; /* Glow border on hover */
    }
    .gallery-grid > div img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.4s ease;
      filter: brightness(1.05) contrast(1.1); /* Sedikit enhance warna untuk makanan */
    }
    .gallery-grid > div:hover {
      transform: translateY(-8px) scale(1.03); /* Lift + zoom hover */
      z-index: 2; /* Naik ke depan saat hover */
      box-shadow: 0 12px 40px rgba(46, 139, 79, 0.2); /* Shadow lebih dalam */
    }
    .gallery-grid > div:hover img {
      transform: scale(1.1); /* Zoom in gambar */
    }
    /* Stagger animation untuk load (kurang abstrak, lebih hidup) */
    .gallery-grid > div:nth-child(1) { animation-delay: 0.1s; }
    .gallery-grid > div:nth-child(2) { animation-delay: 0.2s; }
    .gallery-grid > div:nth-child(3) { animation-delay: 0.3s; }
    .gallery-grid > div:nth-child(4) { animation-delay: 0.4s; }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .gallery-grid > div {
      animation: fadeInUp 0.6s ease forwards;
      opacity: 0;
    }
    /* Responsive: Mobile lebih sederhana, stack dengan height variatif */
    @media (max-width: 600px) {
      .gallery-grid {
        grid-template-columns: 1fr;
        grid-auto-rows: auto;
        gap: 12px;
        max-width: none;
      }
      .gallery-grid > div {
        margin-bottom: 0; /* Hapus overlap di mobile */
      }
      .gallery-grid > div:nth-child(n) img {
        height: 200px; /* Fixed di mobile biar konsisten */
      }
    }
    /* === TESTIMONIALS GRID === */
    .testi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 18px;
    }
    .testi-item {
      padding: 16px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.95));
      box-shadow: var(--card-shadow);
    }
    .testi-item p {
      color: var(--muted);
      margin: 8px 0;
    }
    /* === CONTACT GRID === */
    .contact-grid {
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 20px;
    }
    .form-card label {
      display: block;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }
    .form-card input,
    .form-card textarea {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid rgba(6, 15, 12, 0.06);
      margin-top: 6px;
    }
    /* === MODAL === */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      z-index: 1100;
      align-items: center;
      justify-content: center;
      overflow: auto;
    }
    .modal[aria-hidden="false"] {
      display: flex;
    }
    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(10, 12, 10, 0.36);
      backdrop-filter: blur(2px);
    }
    .modal-panel {
      position: relative;
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      width: 420px;
      max-width: 96%;
      margin: 24px;
      box-shadow: 0 20px 60px rgba(6, 15, 12, 0.18);
      transform: translateY(20px);
      animation: pop 0.28s cubic-bezier(0.2, 0.9, 0.3, 1) forwards;
    }
    @keyframes pop {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .modal-close {
      border: 0;
      background: transparent;
      font-size: 18px;
      cursor: pointer;
      position: absolute;
      right: 12px;
      top: 10px;
    }
    /* === CART SIDEBAR === */
    .cart {
      position: fixed;
      right: 20px;
      top: 80px;
      width: 360px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 24px 70px rgba(6, 15, 12, 0.18);
      z-index: 1200;
      padding: 14px;
      display: none;
    }
    .cart[aria-hidden="false"] {
      display: block;
    }
    .cart-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px dashed rgba(6, 15, 12, 0.04);
      padding-bottom: 8px;
      margin-bottom: 10px;
    }
    .cart-body {
      max-height: 320px;
      overflow: auto;
      padding: 6px;
    }
    .cart-item {
      display: flex;
      gap: 10px;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(6, 15, 12, 0.03);
    }
    .cart-item img {
      width: 56px;
      height: 56px;
      object-fit: cover;
      border-radius: 8px;
    }
    .cart-foot {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }
    /* === FOOTER === */
    .footer {
      padding: 30px 0;
      background: linear-gradient(90deg, var(--green), var(--green-2));
      color: #fff;
      margin-top: 36px;
      text-align: center;
      font-style: italic;
      position: relative;
      z-index: 1;
    }
    /* === FLOATING CHAT BUTTON === */
    .floating-chat-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: auto;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      border: none;
      cursor: pointer;
      z-index: 99999;
      box-shadow: 0 8px 25px rgba(46, 139, 79, 0.3);
      transition: transform 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .floating-chat-btn:hover {
      transform: scale(1.05);
    }
    .floating-chat-btn img {
      width: 32px;
      height: 32px;
      object-fit: contain;
    }
    /* === CHAT MODAL === */
    .chat-modal {
      position: fixed;
      inset: 0;
      display: none;
      z-index: 1300;
      align-items: flex-end;
      justify-content: flex-start;
      overflow: auto;
    }
    .chat-modal[aria-hidden="false"] {
      display: flex;
    }
    .chat-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(10, 12, 10, 0.36);
      backdrop-filter: blur(2px);
    }
    .chat-panel {
      position: relative;
      background: #fff;
      border-radius: 12px;
      width: 320px;
      max-width: 500px;
      height: 720px;
      max-height: 600px;
      margin: 24px;
      box-shadow: 0 20px 60px rgba(6, 15, 12, 0.18);
      display: flex;
      flex-direction: column;
    }
    .chat-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid rgba(6, 15, 12, 0.06);
    }
    .chat-head h3 {
      margin: 0;
      color: var(--green);
    }
    .chat-close {
      border: 0;
      background: transparent;
      font-size: 18px;
      cursor: pointer;
    }
    .chat-body {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .chat-message {
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 80%;
    }
    .user-message {
      align-self: flex-end;
      background: linear-gradient(90deg, var(--green), var(--green-2));
      color: #fff;
    }
    .ai-message {
      align-self: flex-start;
      background: var(--glass);
      color: #111;
    }
    .chat-foot {
      padding: 16px;
      border-top: 1px solid rgba(6, 15, 12, 0.06);
    }
    .chat-input-wrapper {
      display: flex;
      gap: 8px;
    }
    .chat-input-wrapper input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid rgba(6, 15, 12, 0.06);
    }
    .chat-note {
      font-size: 0.85rem;
      text-align: center;
      margin-top: 8px;
    }
    /* === RESPONSIVE === */
    @media (max-width: 900px) {
      .hero-inner {
        grid-template-columns: 1fr;
      }
      .grid {
        grid-template-columns: 1fr;
      }
      .contact-grid {
        grid-template-columns: 1fr;
      }
      .nav-links {
        display: none;
      }
      .menu-item.special {
        grid-column: span 1;
      }
    }
    /* === REVEAL ANIMATION === */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s cubic-bezier(0.2, 0.9, 0.3, 1);
    }
    .reveal.inview {
      opacity: 1;
      transform: translateY(0);
    }
    /* === INTERACTIVE CARD TILT === */
    .interactive-card {
      transition: transform 0.35s cubic-bezier(0.2, 0.9, 0.3, 1), box-shadow 0.35s;
    }
  </style>
</head>
<body>
  <!-- LOADING -->
  <div id="loading" class="loading">
    <div class="loader">
      <svg viewBox="0 0 120 120" class="logo-spin"><circle cx="60" cy="60" r="28" /></svg>
      <p>Sek yoo...</p>
    </div>
  </div>
  <!-- NAVBAR (Separated + Always Visible) -->
  <header class="nav-fixed">
    <nav class="nav container">
      <a class="brand" href="#home">
        <img src="images/logo.png" alt="Heavenly Logo" class="brand-mark" />
       
      </a>
      <ul class="nav-links">
        <li><a href="#about">Tentang</a></li>
        <li><a href="#menu">Menu</a></li>
        <li><a href="#gallery">Galeri</a></li>
        <li><a href="#contact">Kontak</a></li>
      </ul>
      <div class="nav-actions">
        <button id="cartBtn" class="btn ghost">Keranjang Pesanan <span id="cart-count" class="badge">0</span></button>
      </div>
    </nav>
  </header>
  <!-- HERO -->
  <section id="home" class="hero">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="container hero-inner">
      <div class="hero-content">
        <h1 class="title">heavenly.fd</h1>
        <p class="subtitle">Masakan sederhana dari dapur kecil rumahan. Rasakan cita rasa Makanan ala kafe dan Resto dengan harga yang bersahabat dengan kantong para pejuang keluarga kecil anda.</p>
        <div class="hero-cta">
         <a href="#menu" class="btn primary">Lihat Menu</a>
         <a href="#contact" class="btn ghost">Hubungi Kami</a>
       </div>
      </div>
      <figure class="hero-card interactive-card" data-tilt>
        <img src="images/signature.png" alt="Heavenly signature dish">
        <figcaption>
          <h3>SIGNATURE - Nasi Ayam Saus Teriyaki</h3>
          <p>Nasi + Ayam Saus Teriyaki + Telur.</p>
        </figcaption>
      </figure>
    </div>
    <svg class="hero-wave" viewBox="0 0 1440 120" preserveAspectRatio="none"><path d="M0 0 C400 120 1040 0 1440 120 L1440 0 L0 0 Z" fill="white" opacity="0.95"/></svg>
  </section>
  <!-- MAIN -->
  <main>
    <!-- ABOUT -->
    <section id="about" class="section container">
      <div class="grid about-grid reveal">
        <div class="card glass">
          <h2>Tentang Heavenly</h2>
          <p id="about-desc">Kisah Heavenly Food ini sederhana. Semuanya berawal dari kehangatan sebuah tongkrongan, tempat kami sering berkumpul, berbagi cerita, dan tentu saja... makan bersama. Awalnya, kami hanya iseng memasak untuk teman-teman dekat. Namun, melihat piring-piring yang selalu kembali ludes total, dorongan pun muncul. Celetukan mereka menjadi motivasi yang kuat: "Ini enak banget, serius! Jualin saja!" Dari dorongan yang tulus itulah, dengan Bismillah, kami memberanikan diri. Lahirlah Heavenly Food! Berangkat dari dapur rumahan kecil di Malang, kami membawa mimpi besar: berbagi kebahagiaan rasa yang dulu hanya dirasakan oleh lingkaran pertemanan kami, kini untuk Anda semua. Filosofi kami tidak pernah berubah. Rasa yang kami sajikan tetap sama, rasa yang tulus, dibuat dengan hati, persis seperti saat memasak untuk orang-orang terdekat. Selamat menikmati kehangatan dari kami!</p>
          <p class="muted">Dari dapur rumah ke meja Anda.</p>
        </div>
        <div class="card image-card">
          <img src="images/about.png" alt="Dapur Heavenly" loading="lazy">
        </div>
      </div>
    </section>
    <!-- MENU -->
    <section id="menu" class="section section-alt">
      <div class="container">
        <h2 class="section-title reveal">Menu Kami</h2>
        <div id="menu-grid" class="menu-grid"></div>
      </div>
    </section>
    <!-- GALLERY -->
    <section id="gallery" class="section container">
      <h2 class="section-title reveal">Galeri</h2>
      <div id="gallery-grid" class="gallery-grid reveal"></div>
    </section>
    <!-- TESTIMONIALS -->
    <section id="testimonials" class="section section-alt">
      <div class="container">
        <h2 class="section-title reveal">Apa Kata Mereka</h2>
        <div id="testi-grid" class="testi-grid reveal"></div>
      </div>
    </section>
    <!-- CONTACT -->
    <section id="contact" class="section container">
      <h2 class="section-title reveal">Kontak & Pemesanan</h2>
      <div class="grid contact-grid reveal">
        <div class="card glass">
          <h3>Pesan Sekarang</h3>
          <p>WhatsApp: <a id="contact-phone" href="#">+62 812-3456-7890</a></p>
          <p>Email: <span id="contact-email">heavenly@food.com</span></p>
          <p>Instagram: <a id="contact-insta" href="#" target="_blank">heavenly.fd</a></p>
        </div>
        <form id="order-form" class="card form-card">
          <h3>Form Request</h3>
          <label>Nama<input type="text" id="o-name" required></label>
          <label>Pesanan<textarea id="o-msg" rows="3" placeholder="Contoh: Nasi Bento 2 porsi"></textarea></label>
          <label>Nomor WhatsApp<input type="tel" id="o-phone" required></label>
          <button type="submit" class="btn primary">Kirim Pesan</button>
          <p class="muted">Kami akan menghubungi Anda segera via WhatsApp.</p>
        </form>
      </div>
    </section>
  </main>
  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>Â© <span id="year"></span> Heavenly â€” Homemade Comfort Food</p>
    </div>
  </footer>
  <!-- MENU MODAL -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <aside class="modal-panel">
      <button id="modal-close" class="modal-close" aria-label="Close">âœ•</button>
      <div id="modal-content"></div>
      <div class="modal-actions">
        <button id="addCart" class="btn primary">Tambah ke Cart</button>
        <button id="modal-order" class="btn ghost">Pesan via WhatsApp</button>
      </div>
    </aside>
  </div>
  <!-- CART SIDEBAR -->
  <aside id="cart" class="cart" aria-hidden="true">
    <div class="cart-head">
      <h3>Keranjang</h3>
      <button id="cartClose" class="modal-close">âœ•</button>
    </div>
    <div id="cartBody" class="cart-body"></div>
    <div class="cart-foot">
      <div class="cart-total">Total: <strong id="cartTotal">Rp 0</strong></div>
      <div class="cart-actions">
        <button id="checkout" class="btn primary">Checkout via WhatsApp</button>
        <button id="clearCart" class="btn ghost">Bersihkan</button>
      </div>
    </div>
  </aside>
  <!-- FLOATING CHAT BUTTON -->
  <!-- GANTI SRC GAMBAR ICON DI SINI SESUAI ICON/GAMBAR KAMU SENDIRI (contoh: images/chat-icon.png) -->
  <button id="chatToggle" class="floating-chat-btn" aria-label="Buka Chat AI">
    <img src="images/chatbot.png" alt="Chat Icon"> <!-- Ganti src dengan path gambar/icon kamu -->
  </button>
  <!-- CHAT MODAL -->
  <div id="chatModal" class="chat-modal" aria-hidden="true">
    <div class="chat-backdrop"></div>
    <aside class="chat-panel">
      <div class="chat-head">
        <h3>Chat dengan Venly!</h3>
        <button id="chatClose" class="chat-close" aria-label="Tutup Chat">âœ•</button>
      </div>
      <div id="chatBody" class="chat-body">
        <!-- Pesan akan ditambahkan di sini via JS -->
      </div>
      <div class="chat-foot">
        <div class="chat-input-wrapper">
          <input type="text" id="chatInput" placeholder="Ketik pesanmu di sini..." maxlength="500">
          <button id="chatSend" class="btn primary">Kirim</button>
        </div>
        <p class="chat-note muted">Balasan dari AI mungkin memakan waktu sebentar...</p>
      </div>
    </aside>
  </div>
  <script>
    // script.js â€” load data.json, UI interactions (modal, cart, animations)
    document.addEventListener('DOMContentLoaded', () => {
      const loading = document.getElementById('loading');
      const yearEl = document.getElementById('year');
      yearEl.textContent = new Date().getFullYear();
      // load data
      fetch('data.json').then(r => r.json()).then(data => {
        renderAbout(data.about);
        renderMenu(data.menu);
        renderGallery(data.gallery);
        renderTesti(data.testimonials);
        setContact(data.contact);
        initInteractions();
        setTimeout(()=> loading.style.display='none', 600); // hide loader
      }).catch(err=>{
        console.error('Gagal load data.json', err);
        loading.style.display='none';
      });
      // -------- RENDER FUNCTIONS ----------
      function renderAbout(about){
        const el = document.getElementById('about-desc');
        if(el) el.textContent = about.description;
      }
      function renderMenu(menu){
        const grid = document.getElementById('menu-grid');
        grid.innerHTML = '';
        menu.forEach(item => {
         const card = document.createElement('article');
         const isSpecial = item.isSpecial;
         card.className = `menu-item ${isSpecial ? 'special' : ''}`;
         card.innerHTML = `
           <div class="thumb"><img src="${item.image}" alt="${item.name}" loading="lazy"></div>
           <div class="meta">
             <h3>${item.name}</h3>
             <p>${item.short || item.description}</p>
             <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
               <div class="price">Rp ${numberFormat(item.price)}${isSpecial ? ' / pcs' : ''}</div>
               <div style="display:flex;gap:8px">
                 <button class="btn ghost btn-detail" data-id="${item.id}">Detail</button>
                 <button class="btn primary btn-add" data-id="${item.id}">Tambah</button>
               </div>
             </div>
             ${isSpecial ? '<p style="margin-top:8px;color:var(--green);font-weight:600">Min. 10 pcs - Harga spesial Rp 10.000/pcs!</p>' : ''}
           </div>`;
         grid.appendChild(card);
        });
      }
      function renderGallery(imgs){
        const g = document.getElementById('gallery-grid');
        g.innerHTML = '';
        if (!imgs || imgs.length < 4) {
         console.warn('Gallery array kurang dari 4 gambar!'); // Debug log
         return;
        }
        // Shuffle random urutan untuk variasi
        const shuffledImgs = [...imgs].sort(() => Math.random() - 0.5);
        shuffledImgs.slice(0, 4).forEach((src, index) => {
         const imgContainer = document.createElement('div'); // Wrapper
         const img = document.createElement('img');
         img.src = src;
         img.loading = 'lazy';
         img.alt = `Gambar gallery ${index + 1}`;
         img.style.opacity = '0'; // Mulai hidden untuk animasi
         img.onerror = () => {
           img.style.display = 'none';
           imgContainer.innerHTML = `<div style="background:#f0f0f0; height:180px; display:flex; align-items:center; justify-content:center; border-radius:12px; color:var(--muted);">Gambar ${index + 1} belum tersedia</div>`;
           imgContainer.style.gridRowEnd = 'span 18'; // Default 180px fallback
         };
         img.onload = () => {
           // Adjust height berdasarkan aspect ratio asli + random multiplier (estetik variatif)
           const aspectRatio = img.naturalWidth / img.naturalHeight;
           const baseHeight = aspectRatio > 1 ? 200 : 250; // Landscape lebih pendek, portrait lebih tinggi
           const randomMultiplier = 0.8 + Math.random() * 0.6; // 0.8-1.4x untuk variasi (kurang abstrak)
           const targetHeight = Math.round(baseHeight * randomMultiplier);
           const rowSpan = Math.ceil(targetHeight / 10); // Karena grid-auto-rows: 10px
           imgContainer.style.gridRowEnd = `span ${rowSpan}`;
           img.style.opacity = '1'; // Fade in setelah load
         };
         imgContainer.appendChild(img);
         g.appendChild(imgContainer);
        });
      }
      function renderTesti(t){
        const g = document.getElementById('testi-grid');
        g.innerHTML = '';
        t.forEach(x=>{
         const div = document.createElement('div'); div.className='testi-item';
         div.innerHTML = `<strong>${x.name}</strong><p>${x.comment}</p>`;
         g.appendChild(div);
        });
      }
      function setContact(c){
        document.getElementById('contact-phone').textContent = c.phone;
        document.getElementById('contact-phone').href = `https://wa.me/${stripPhone(c.phone)}`;
        document.getElementById('contact-email').textContent = c.email;
        document.getElementById('contact-insta').href = c.instagram;
      }
      // ---------- BASIC HELPERS -------------
      function numberFormat(n){ return Number(n).toLocaleString('id-ID'); }
      function stripPhone(phone){ return phone.replace(/\D/g,'').replace(/^0/,'62'); }
      // ---------- INTERACTIONS --------------
      function initInteractions(){
        // modal
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        const modalClose = document.getElementById('modal-close');
        const addCartBtn = document.getElementById('addCart');
        let currentId = null;
        document.body.addEventListener('click', e => {
         if(e.target.matches('.btn-detail')) openDetail(e.target.dataset.id);
         if(e.target.matches('.btn-add')) addToCartById(e.target.dataset.id);
        });
        modalClose.addEventListener('click', ()=> closeModal());
        modal.querySelector('.modal-backdrop').addEventListener('click', ()=> closeModal());
        function openDetail(id){
         fetch('data.json').then(r=>r.json()).then(d=>{
           const item = d.menu.find(m=>String(m.id)===String(id));
           if(!item) return;
           currentId = id;
           const isSpecial = item.isSpecial;
           modalContent.innerHTML = `
             <div style="display:flex;gap:12px">
               <img src="${item.image}" alt="${item.name}" style="width:120px;height:120px;object-fit:cover;border-radius:10px">
               <div>
                 <h3>${item.name}</h3>
                 <p style="color:var(--muted)">${item.description}</p>
                 <p style="margin-top:8px;font-weight:700">Rp ${numberFormat(item.price)}${isSpecial ? ' / pcs' : ''}</p>
                 ${isSpecial ? '<p style="margin-top:8px;color:var(--green);font-weight:600">Min. 10 pcs - Hanya bisa ditambah, tidak bisa dikurangi.</p>' : ''}
               </div>
             </div>
           `;
           addCartBtn.onclick = ()=> addToCartById(id);
           document.getElementById('modal-order').onclick = ()=> {
             const wa = 'https://wa.me/' + stripPhone(document.getElementById('contact-phone').textContent) +
               '?text=' + encodeURIComponent(`Halo Heavenly, saya mau pesan: ${item.name} - Rp ${numberFormat(item.price)}${isSpecial ? ' / pcs' : ''}\n\n${item.description}${isSpecial ? '\nMin. 10 pcs.' : ''}`);
             window.open(wa, '_blank');
           };
           modal.setAttribute('aria-hidden','false');
         });
        }
        function closeModal(){
         modal.setAttribute('aria-hidden','true');
        }
        // Tilt effect for cards with data-tilt
        document.querySelectorAll('[data-tilt]').forEach(el=>{
         el.addEventListener('mousemove', (ev)=>{
           const rect = el.getBoundingClientRect();
           const x = (ev.clientX - rect.left) / rect.width - 0.5;
           const y = (ev.clientY - rect.top) / rect.height - 0.5;
           el.style.transform = `perspective(900px) rotateX(${ -y * 6 }deg) rotateY(${ x * 8 }deg) translateZ(6px)`;
         });
         el.addEventListener('mouseleave', ()=> el.style.transform = 'none');
        });
        // reveal on scroll (IntersectionObserver)
        const observer = new IntersectionObserver((entries)=>{
         entries.forEach(e=>{
           if(e.isIntersecting) e.target.classList.add('inview');
         });
        }, {threshold:0.15});
        document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));
        document.querySelectorAll('.menu-item').forEach(el=>observer.observe(el));
        // buttons in menu: open modal for detail via delegation handled above
        // CART - simple localStorage cart
        const cartBtn = document.getElementById('cartBtn');
        const cartEl = document.getElementById('cart');
        const cartClose = document.getElementById('cartClose');
        const cartBody = document.getElementById('cartBody');
        const cartCount = document.getElementById('cart-count');
        const cartTotal = document.getElementById('cartTotal');
        const checkout = document.getElementById('checkout');
        const clearCart = document.getElementById('clearCart');
        cartBtn.addEventListener('click', ()=> toggleCart(true));
        cartClose.addEventListener('click', ()=> toggleCart(false));
        clearCart.addEventListener('click', ()=> { localStorage.removeItem('hv_cart'); updateCartUI(); });
        checkout.addEventListener('click', ()=>{
         const cart = getCart();
         if(!cart.length) return alert('Keranjang kosong');
         const lines = cart.map(it => `${it.qty}x ${it.name} - Rp ${numberFormat(it.price*it.qty)}`);
         const text = `Halo Heavenly, saya ingin memesan:\n${lines.join('\n')}\nTotal: Rp ${numberFormat(cart.reduce((s,i)=>s+i.price*i.qty,0))}`;
         window.open('https://wa.me/' + stripPhone(document.getElementById('contact-phone').textContent) + '?text=' + encodeURIComponent(text), '_blank');
        });
        function getCart(){return JSON.parse(localStorage.getItem('hv_cart')||'[]')}
        function saveCart(cart){localStorage.setItem('hv_cart', JSON.stringify(cart)); updateCartUI()}
        function addToCartById(id){
         fetch('data.json').then(r=>r.json()).then(d=>{
           const item = d.menu.find(m=>String(m.id)===String(id));
           if(!item) return;
           const cart = getCart();
           const found = cart.find(c=>c.id==id);
           const isSpecial = item.isSpecial;
           const minQty = isSpecial ? 10 : 1;
           if(found) {
             if(isSpecial && found.qty < minQty) {
               found.qty = minQty; // Ensure min 10 for special
             } else {
               found.qty += 1;
             }
           } else {
             cart.push({id:item.id,name:item.name,price:item.price,image:item.image,qty:minQty});
           }
           saveCart(cart);
           animateAddToCart();
         });
        }
        function updateCartUI(){
         const cart = getCart();
         cartBody.innerHTML = '';
         let total = 0;
         cart.forEach(it=>{
           total += it.price * it.qty;
           const isSpecial = it.id == 7; // Assuming id 7 is special
           const row = document.createElement('div'); row.className='cart-item';
           row.innerHTML = `<img src="${it.image}" alt="${it.name}"><div style="flex:1"><strong>${it.name}</strong><div style="color:var(--muted);font-size:0.95rem">Rp ${numberFormat(it.price)} Â· x${it.qty}</div></div>
             <div style="display:flex;flex-direction:column;gap:6px">
               ${isSpecial && it.qty <= 10 ? '' : `<button class="btn ghost cart-dec" data-id="${it.id}">-</button>`}
               <button class="btn ghost cart-inc" data-id="${it.id}">+</button>
             </div>`;
           cartBody.appendChild(row);
         });
         cartTotal.textContent = 'Rp ' + numberFormat(total);
         cartCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
         // attach inc/dec
         cartBody.querySelectorAll('.cart-inc').forEach(b=>b.addEventListener('click', e=>{
           const id = e.target.dataset.id; changeQty(id,1);
         }));
         cartBody.querySelectorAll('.cart-dec').forEach(b=>b.addEventListener('click', e=>{
           const id = e.target.dataset.id; changeQty(id,-1);
         }));
        }
        function changeQty(id,delta){
         const cart = getCart();
         const idx = cart.findIndex(i=>String(i.id)===String(id));
         if(idx<0) return;
         const isSpecial = id == 7; // Assuming id 7 is special
         const minQty = isSpecial ? 10 : 1;
         cart[idx].qty += delta;
         if(cart[idx].qty < minQty) {
           cart[idx].qty = minQty; // Enforce min for special
           if(delta < 0 && isSpecial) return; // Don't allow decrease below min
         }
         if(cart[idx].qty <= 0 && !isSpecial) cart.splice(idx,1); // Only remove if normal and <=0
         saveCart(cart);
        }
        function toggleCart(open){
         if(open){ cartEl.setAttribute('aria-hidden','false'); updateCartUI(); } else cartEl.setAttribute('aria-hidden','true');
        }
        function animateAddToCart(){
         const badge = cartCount;
         badge.animate([{transform:'scale(1)'},{transform:'scale(1.4)'},{transform:'scale(1)'}],{duration:350});
        }
        // initial cart UI
        updateCartUI();
       
        // simple parallax hero background
        window.addEventListener('scroll', () => {
         const heroBg = document.querySelector('.hero-bg');
         if(heroBg) heroBg.style.transform = `translateY(${window.scrollY * 0.08}px)`;
        });
        // form submit (fake)
        document.getElementById('order-form').addEventListener('submit', e=>{
         e.preventDefault();
         alert('Terima kasih! Pesananmu akan kami proses via WhatsApp.');
         e.target.reset();
        });
        // Force floating button position (extra fix)
        const chatBtn = document.getElementById('chatToggle');
        if (chatBtn) {
         chatBtn.style.position = 'fixed';
         chatBtn.style.bottom = '20px';
         chatBtn.style.right = '20px';
         chatBtn.style.zIndex = '99999';
         console.log('Button forced fixed!');
        }
       // ---------- FLOATING CHAT WITH /api/gemini PROXY ----------
        const chatToggle = document.getElementById('chatToggle');
        const chatModal = document.getElementById('chatModal');
        const chatClose = document.getElementById('chatClose');
        const chatSend = document.getElementById('chatSend');
        const chatInput = document.getElementById('chatInput');
        const chatBody = document.getElementById('chatBody');
        // System prompt (dikirim ke server)
        const SYSTEM_PROMPT = `Kamu adalah asisten AI ramah bernama Venly untuk website Heavenly Food (Nama Owner nya Mas 'Filla' dan Mas 'Angga', instagramnya '@khuzaimafilla' dan '@nggara.p', masakan rumahan di Malang: Nasi Ayam Teriyaki, Bento, dll. Harga murah, pesan via WA +62 821-3251-7964). Jawab dalam bahasa Indonesia, santai, dan bantu user (tanya menu, pesan, rekomendasi). Kalau nggak relevan, arahkan ke menu/kontak. Jaga jawaban singkat (max 150 kata).`;
        // History chat (system prompt di awal)
        let chatHistory = [
          { role: 'model', parts: [{ text: SYSTEM_PROMPT }] },
          { role: 'model', parts: [{ text: 'Halo! Saya Venly, asisten pintar untuk bantu pesan makanan atau tanya menu. Apa yang bisa saya bantu hari ini? ðŸ˜Š' }] }
        ];
        // Render initial message
        if (chatBody) {
          addMessage('Halo! Saya Venly, asisten pintar untuk bantu pesan makanan atau tanya menu. Apa yang bisa saya bantu hari ini? ðŸ˜Š', false);
        }
        // Event listeners
        if (chatToggle) chatToggle.addEventListener('click', () => toggleChat(true));
        if (chatClose) chatClose.addEventListener('click', () => toggleChat(false));
        if (chatModal) chatModal.querySelector('.chat-backdrop').addEventListener('click', () => toggleChat(false));
        if (chatSend) chatSend.addEventListener('click', sendMessage);
        if (chatInput) chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMessage(); });
        function toggleChat(open) {
          if (open) {
            if (chatModal) chatModal.setAttribute('aria-hidden', 'false');
            if (chatInput) chatInput.focus();
          } else {
            if (chatModal) chatModal.setAttribute('aria-hidden', 'true');
            if (chatInput) chatInput.value = '';
          }
        }
        function addMessage(text, isUser = false) {
          if (!chatBody) return;
          const msg = document.createElement('div');
          msg.className = `chat-message ${isUser ? 'user-message' : 'ai-message'}`;
          msg.innerHTML = `<p>${text}</p>`;
          chatBody.appendChild(msg);
          chatBody.scrollTop = chatBody.scrollHeight;
        }
        async function sendMessage() {
          if (!chatInput || !chatSend || !chatBody) return;
          const text = chatInput.value.trim();
          if (!text) return;
          // Tambah user message ke history
          chatHistory.push({ role: 'user', parts: [{ text }] });
          addMessage(text, true);
          chatInput.value = '';
          // Loading
          chatSend.disabled = true;
          chatSend.textContent = 'Lagi Mikir...';
          const typingMsg = document.createElement('div');
          typingMsg.className = 'chat-message ai-message';
          typingMsg.innerHTML = '<p><em>Mengetik...</em></p>';
          chatBody.appendChild(typingMsg);
          chatBody.scrollTop = chatBody.scrollHeight;
          try {
            const response = await fetch('/api/gemini', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                contents: chatHistory,
                generationConfig: {
                  temperature: 0.7,
                  topK: 40,
                  topP: 0.95,
                  maxOutputTokens: 200,
                },
                safetySettings: [{ category: 'HARM_CATEGORY_HARASSMENT', threshold: 'BLOCK_MEDIUM_AND_ABOVE' }],
              }),
            });
            const dataResp = await response.json();
            // FIX: Check response structure (debug log)
            console.log('Proxy Response:', dataResp);  // Lihat ini di Console buat debug
            if (!response.ok) {
              throw new Error(`HTTP ${response.status}: ${dataResp.error?.message || response.statusText}`);
            }
            if (!dataResp.candidates || !dataResp.candidates[0] || !dataResp.candidates[0].content || !dataResp.candidates[0].content.parts || !dataResp.candidates[0].content.parts[0]) {
              throw new Error('Invalid response: No candidates or parts. Check server logs. Response: ' + JSON.stringify(dataResp));
            }
            const aiText = dataResp.candidates[0].content.parts[0].text;
            // Update history
            chatHistory.push({ role: 'model', parts: [{ text: aiText }] });
            // Update UI
            chatBody.removeChild(typingMsg);
            addMessage(aiText, false);
          } catch (error) {
            console.error('Gemini Proxy Error:', error);
            chatBody.removeChild(typingMsg);
            addMessage(`Maaf, ada kesalahan: ${error.message}. Coba refresh atau hubungi WA kami (+62 821-3251-7964)! ðŸ˜…`, false);
          } finally {
            chatSend.disabled = false;
            chatSend.textContent = 'Kirim';
          }
        }
      } // end initInteractions
    });
  </script>
</body>
</html>